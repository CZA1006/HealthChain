# DataID & ListDataID è®¾è®¡æ”¹è¿›æ€»ç»“

## æ”¹è¿›æ¦‚è¿°

åŸºäºç”¨æˆ·ä½“éªŒå’Œå¯ç”¨æ€§åŸåˆ™ï¼Œå¯¹ DataID å’Œ ListDataID çš„è®¾è®¡è¿›è¡Œäº†å…¨é¢æ”¹è¿›ï¼Œåœ¨ä¿æŒå…¨å±€å”¯ä¸€æ€§çš„åŒæ—¶å¤§å¹…æå‡äº†å¯è§æ€§å’Œå¯ç”¨æ€§ã€‚

---

## âœ¨ ä¸»è¦æ”¹è¿›

### 1. **æ·»åŠ  "My DataIDs" æ˜¾ç¤ºåŒºåŸŸ**

**ä½ç½®**: App.jsx - "3. Create Marketplace Listing" å¡ç‰‡é¡¶éƒ¨

**åŠŸèƒ½**:
- è‡ªåŠ¨è·å–å¹¶æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‹¥æœ‰çš„æ‰€æœ‰ DataID
- ä»¥ç½‘æ ¼å¡ç‰‡å½¢å¼å±•ç¤ºï¼Œæ¯ä¸ª DataID ç‹¬ç«‹å¡ç‰‡
- ç‚¹å‡»å¡ç‰‡å¯å¿«é€Ÿé€‰æ‹©è¯¥ DataID ç”¨äºä¸Šæ¶

**ä»£ç å˜æ›´**:
```javascript
// æ–°å¢çŠ¶æ€
const [myDataIds, setMyDataIds] = useState([]);

// åœ¨ loadMyHealthData ä¸­å¡«å……
const allDataIds = dataIds.map(id => Number(id));
setMyDataIds(allDataIds);
```

**UI å±•ç¤º**:
```
ğŸ“‹ My Registered DataIDs (3)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  #1234  â”‚  â”‚  #1235  â”‚  â”‚  #1236  â”‚
â”‚ [Select]â”‚  â”‚ [Select]â”‚  â”‚ [Select]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. **ListDataID è¾“å…¥æ¡†æ”¹ä¸ºä¸‹æ‹‰é€‰æ‹©å™¨**

**æ”¹è¿›å‰**:
```jsx
<Input
  label="DataId to List"
  type="number"
  value={listDataId}
  onChange={(e) => setListDataId(e.target.value)}
/>
```

**æ”¹è¿›å**:
```jsx
<select 
  className="select-input"
  value={listDataId} 
  onChange={(e) => setListDataId(e.target.value)}
  disabled={myDataIds.length === 0}
>
  <option value="">-- Select DataID --</option>
  {myDataIds.map(id => (
    <option key={id} value={id}>
      DataID #{id} {id === lastDataId ? '(Latest)' : ''}
    </option>
  ))}
</select>
```

**ä¼˜åŠ¿**:
- âœ… é˜²æ­¢è¾“å…¥é”™è¯¯ï¼ˆä¸å­˜åœ¨çš„ DataIDï¼‰
- âœ… é˜²æ­¢è¾“å…¥ä»–äººçš„ DataID
- âœ… è‡ªåŠ¨æ ‡è®°æœ€æ–°æ³¨å†Œçš„ DataID
- âœ… ç”¨æˆ·ä½“éªŒæ›´å‹å¥½

---

### 3. **æ·»åŠ  DataID éªŒè¯æœºåˆ¶**

**ä½ç½®**: `createListing()` å‡½æ•°

**éªŒè¯é€»è¾‘**:
```javascript
// 1. éªŒè¯ DataID æ˜¯å¦å­˜åœ¨
const record = await registry.records(id);
if (record.provider === ethers.ZeroAddress) {
  toast.error(`DataID #${id} does not exist on-chain`);
  return;
}

// 2. éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è¯¥ DataID
if (record.provider !== account) {
  toast.error(`You don't own DataID #${id}`);
  return;
}
```

**é˜²æ­¢é—®é¢˜**:
- âŒ ä¸Šæ¶ä¸å­˜åœ¨çš„ DataID
- âŒ ä¸Šæ¶ä»–äººçš„ DataID
- âŒ æ— æ•ˆäº¤æ˜“æµªè´¹ Gas

---

### 4. **æ”¹è¿› HealthDataCard çš„ DataID æ˜¾ç¤º**

**ä½ç½®**: `HealthDataCard.jsx`

**æ”¹è¿›å‰**:
```jsx
<h4>Health Data #{dataId}</h4>
```

**æ”¹è¿›å**:
```jsx
<div className="health-card-title-row">
  <span className="data-id-tag">DataID #{dataId}</span>
  <Badge variant={getTypeVariant(data.metricType)}>
    {data.metricType.toUpperCase()}
  </Badge>
</div>
```

**è§†è§‰æ•ˆæœ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [DataID #1234]  [DAILY]         â”‚ â† é†’ç›®çš„æ ‡ç­¾
â”‚ ğŸ“… Nov 28, 2025, 10:30 AM       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš¶ Steps: 12,500                â”‚
â”‚ â¤ï¸ Heart Rate: 72 bpm           â”‚
â”‚ ...                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ·å¼ç‰¹ç‚¹**:
- æ¸å˜èƒŒæ™¯ (è“ç´«è‰²)
- å‘å…‰è¾¹æ¡†
- ç­‰å®½å­—ä½“ (monospace)
- Hover ç¼©æ”¾æ•ˆæœ

---

### 5. **æ–°å¢ CSS æ ·å¼**

**æ–‡ä»¶**: `App.css`

**æ–°å¢æ ·å¼ç±»**:
```css
.my-data-ids-section { ... }       /* DataID åŒºåŸŸå®¹å™¨ */
.data-id-grid { ... }               /* DataID ç½‘æ ¼å¸ƒå±€ */
.data-id-card { ... }               /* å•ä¸ª DataID å¡ç‰‡ */
.data-id-badge { ... }              /* DataID æ•°å­—å¾½ç«  */
.data-id-use-btn { ... }            /* "Select" æŒ‰é’® */
.select-input { ... }               /* ä¸‹æ‹‰é€‰æ‹©å™¨ */
.form-group { ... }                 /* è¡¨å•ç»„ */
.input-label { ... }                /* è¾“å…¥æ ‡ç­¾ */
.input-helper-text { ... }          /* è¾…åŠ©æ–‡æœ¬ */
```

**æ–‡ä»¶**: `HealthDataCard.css`

**æ–°å¢æ ·å¼ç±»**:
```css
.health-card-title-row { ... }      /* æ ‡é¢˜è¡Œ */
.data-id-tag { ... }                /* DataID æ ‡ç­¾ */
```

---

## ğŸ¨ è§†è§‰è®¾è®¡äº®ç‚¹

### DataID å¡ç‰‡è®¾è®¡
- **é¢œè‰²æ–¹æ¡ˆ**: è“è‰²æ¸å˜ (#3b82f6 â†’ #2563eb)
- **å­—ä½“**: SF Mono / Monaco (ç­‰å®½å­—ä½“)
- **åŠ¨ç”»**: 
  - Hover æ—¶å‘ä¸Šæµ®åŠ¨ + ç¼©æ”¾
  - è¾¹æ¡†å‘å…‰æ•ˆæœ
  - èƒŒæ™¯æ¸å˜å åŠ 
- **é˜´å½±**: å¤šå±‚æ¬¡é˜´å½± (0 8px 24px)

### ä¸‹æ‹‰é€‰æ‹©å™¨æ ·å¼
- **èƒŒæ™¯**: åŠé€æ˜æ·±è‰² (rgba(15, 23, 42, 0.6))
- **æ¯›ç»ç’ƒæ•ˆæœ**: `backdrop-filter: blur(10px)`
- **èšç„¦çŠ¶æ€**: è“è‰²è¾¹æ¡† + å¤–å‘å…‰
- **ç¦ç”¨çŠ¶æ€**: é™ä½é€æ˜åº¦ + ç¦æ­¢å…‰æ ‡

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ¡Œé¢ (â‰¥768px)
```
DataID ç½‘æ ¼: è‡ªåŠ¨å¡«å……ï¼Œæœ€å° 140px
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
```

### å¹³æ¿ (â‰¥480px, <768px)
```
DataID ç½‘æ ¼: æœ€å° 120px
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
```

### æ‰‹æœº (<480px)
```
DataID ç½‘æ ¼: 2 åˆ—å›ºå®š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚  1  â”‚  2  â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  3  â”‚  4  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ç”¨æˆ·å·¥ä½œæµç¨‹ï¼ˆä¼˜åŒ–åï¼‰

### åœºæ™¯ 1: æ³¨å†Œåç«‹å³ä¸Šæ¶

1. ç”¨æˆ·æ³¨å†Œå¥åº·æ•°æ®
   ```
   ğŸ“Š Register Health Data
   [Steps: 12500] [Heart Rate: 72]
   â†’ Click "Register"
   ```

2. ç³»ç»Ÿè‡ªåŠ¨å¡«å…… DataID
   ```
   âœ… Health data registered successfully! DataId: 1234
   
   ğŸ“‹ My Registered DataIDs (1)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  #1234  â”‚ â† è‡ªåŠ¨é«˜äº®æœ€æ–°
   â”‚ [Select]â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

3. ä¸‹æ‹‰æ¡†è‡ªåŠ¨é€‰ä¸­æœ€æ–° DataID
   ```
   3. Create Marketplace Listing
   DataID: [DataID #1234 (Latest) â–¼]
   Price:  [100 HTC]
   ```

4. è®¾ç½®ä»·æ ¼å¹¶ä¸Šæ¶
   ```
   â†’ Click "Create Listing"
   âœ… Listing created for DataID #1234 at 100 HTC
   ```

### åœºæ™¯ 2: ä»å·²æœ‰æ•°æ®ä¸­é€‰æ‹©ä¸Šæ¶

1. æŸ¥çœ‹ "My DataIDs" åŒºåŸŸ
   ```
   ğŸ“‹ My Registered DataIDs (5)
   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
   â”‚#1230â”‚â”‚#1231â”‚â”‚#1232â”‚â”‚#1233â”‚â”‚#1234â”‚
   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
   ```

2. ç‚¹å‡»æƒ³è¦ä¸Šæ¶çš„ DataID å¡ç‰‡
   ```
   â†’ Click on #1232
   â„¹ï¸ Selected DataID #1232 for listing
   ```

3. ä¸‹æ‹‰æ¡†è‡ªåŠ¨å¡«å……
   ```
   DataID: [DataID #1232 â–¼]
   ```

### åœºæ™¯ 3: ä»å¥åº·æ•°æ®å¡ç‰‡å¿«é€Ÿä¸Šæ¶

1. æŸ¥çœ‹ "My Health Data Records"
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ [DataID #1234] [DAILY] â”‚
   â”‚ ğŸ“… Nov 28, 2025        â”‚
   â”‚ ğŸš¶ Steps: 12,500       â”‚
   â”‚ ...                    â”‚
   â”‚ [ğŸ“‹ List on Market]    â”‚ â† ç‚¹å‡»
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

2. è‡ªåŠ¨æ»šåŠ¨åˆ°ä¸Šæ¶åŒºåŸŸ
   ```
   â†’ Scroll to top
   â„¹ï¸ Ready to list Health Data #1234. Set your price below.
   ```

3. DataID å·²é¢„å¡«å……
   ```
   DataID: [DataID #1234 â–¼]
   Price:  [_____]
   ```

---

## ğŸ›¡ï¸ å®‰å…¨æ€§æ”¹è¿›

### é“¾ä¸ŠéªŒè¯
```javascript
// âœ… éªŒè¯ DataID å­˜åœ¨æ€§
const record = await registry.records(id);
if (record.provider === ethers.ZeroAddress) {
  // DataID ä¸å­˜åœ¨
}

// âœ… éªŒè¯æ‰€æœ‰æƒ
if (record.provider !== account) {
  // ç”¨æˆ·ä¸æ‹¥æœ‰æ­¤ DataID
}
```

### å‰ç«¯é™åˆ¶
- âœ… ä¸‹æ‹‰æ¡†åªæ˜¾ç¤ºç”¨æˆ·è‡ªå·±çš„ DataID
- âœ… ç©ºæ•°æ®æ—¶ç¦ç”¨ä¸Šæ¶æŒ‰é’®
- âœ… æœªæ³¨å†Œæ•°æ®æ—¶æ˜¾ç¤ºæç¤ºæ–‡æœ¬

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åŠ è½½
```javascript
// ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ DataID
const dataIds = await registry.getUserDataIds(addr);
setMyDataIds(dataIds.map(id => Number(id)));

// é¿å…é‡å¤æŸ¥è¯¢
if (!registry || !addr) return;
```

### çŠ¶æ€ç®¡ç†
```javascript
// é›†ä¸­ç®¡ç† DataID çŠ¶æ€
const [myDataIds, setMyDataIds] = useState([]);

// ç™»å‡ºæ—¶æ¸…ç†
const handleLogout = () => {
  setMyDataIds([]);
  // ...
};
```

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### æµ‹è¯• 1: DataID å¯è§æ€§
- [ ] è¿æ¥é’±åŒ…åèƒ½çœ‹åˆ° "My DataIDs" åŒºåŸŸ
- [ ] æ³¨å†Œæ•°æ®å DataID ç«‹å³æ˜¾ç¤º
- [ ] DataID æ•°é‡æ­£ç¡®ï¼ˆä¸é“¾ä¸Šä¸€è‡´ï¼‰

### æµ‹è¯• 2: ä¸‹æ‹‰é€‰æ‹©å™¨
- [ ] æœªæ³¨å†Œæ•°æ®æ—¶ä¸‹æ‹‰æ¡†ç¦ç”¨
- [ ] é€‰é¡¹åˆ—è¡¨ä¸ DataID å¡ç‰‡ä¸€è‡´
- [ ] æœ€æ–° DataID æ˜¾ç¤º "(Latest)" æ ‡è®°

### æµ‹è¯• 3: DataID éªŒè¯
- [ ] å°è¯•ä¸Šæ¶ä¸å­˜åœ¨çš„ DataID â†’ é”™è¯¯æç¤º
- [ ] å°è¯•ä¸Šæ¶ä»–äººçš„ DataID â†’ é”™è¯¯æç¤º
- [ ] ä¸Šæ¶è‡ªå·±çš„ DataID â†’ æˆåŠŸ

### æµ‹è¯• 4: å“åº”å¼å¸ƒå±€
- [ ] æ¡Œé¢ç«¯: DataID ç½‘æ ¼è‡ªåŠ¨å¡«å……
- [ ] å¹³æ¿ç«¯: ç½‘æ ¼è‡ªåŠ¨è°ƒæ•´
- [ ] æ‰‹æœºç«¯: 2 åˆ—å›ºå®šå¸ƒå±€

### æµ‹è¯• 5: äº¤äº’ä½“éªŒ
- [ ] ç‚¹å‡» DataID å¡ç‰‡ â†’ ä¸‹æ‹‰æ¡†æ›´æ–°
- [ ] ç‚¹å‡»å¥åº·å¡ç‰‡ "List" â†’ è‡ªåŠ¨æ»šåŠ¨ + å¡«å……
- [ ] Hover DataID å¡ç‰‡ â†’ åŠ¨ç”»æ•ˆæœ

---

## ğŸ¯ ç”¨æˆ·ä»·å€¼

### å‰
- âŒ ç”¨æˆ·éœ€è¦æ‰‹åŠ¨è¾“å…¥ DataIDï¼ˆå®¹æ˜“å‡ºé”™ï¼‰
- âŒ ä¸çŸ¥é“è‡ªå·±æœ‰å“ªäº› DataID
- âŒ å¯èƒ½è¾“å…¥ä»–äººçš„ DataID å¯¼è‡´äº¤æ˜“å¤±è´¥
- âŒ DataID åœ¨å¡ç‰‡ä¸­ä¸å¤Ÿé†’ç›®

### å
- âœ… ä¸€ç›®äº†ç„¶çœ‹åˆ°æ‰€æœ‰ DataID
- âœ… ç‚¹å‡»é€‰æ‹©ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥
- âœ… è‡ªåŠ¨éªŒè¯æ‰€æœ‰æƒï¼Œé˜²æ­¢é”™è¯¯
- âœ… DataID é†’ç›®æ˜¾ç¤ºï¼Œæ˜“äºè¯†åˆ«
- âœ… æ”¯æŒå¿«é€Ÿä¸Šæ¶å·¥ä½œæµ

---

## ğŸš€ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React 18
- **æ ·å¼æ–¹æ¡ˆ**: CSS Modules + åŸç”Ÿ CSS
- **åŒºå—é“¾**: Ethers.js v6
- **æ™ºèƒ½åˆçº¦**: DataRegistry, Marketplace
- **UI ç»„ä»¶**: è‡ªå®šä¹‰ç»„ä»¶åº“ï¼ˆCard, Input, Badge, Toastï¼‰

---

## ğŸ“ ä»£ç ç»Ÿè®¡

### ä¿®æ”¹æ–‡ä»¶
- `frontend/src/App.jsx` (+120 lines)
- `frontend/src/App.css` (+180 lines)
- `frontend/src/components/HealthDataCard.jsx` (+15 lines)
- `frontend/src/components/HealthDataCard.css` (+50 lines)

### æ–°å¢åŠŸèƒ½
- `myDataIds` çŠ¶æ€ç®¡ç†
- `My DataIDs` æ˜¾ç¤ºåŒºåŸŸ
- DataID ä¸‹æ‹‰é€‰æ‹©å™¨
- DataID æ‰€æœ‰æƒéªŒè¯
- DataID æ ‡ç­¾æ ·å¼

### ä¼˜åŒ–é¡¹
- ç”¨æˆ·ä½“éªŒ (UX): 5 å¤„æ”¹è¿›
- è§†è§‰è®¾è®¡ (UI): 8 å¤„å¢å¼º
- å®‰å…¨æ€§: 2 å¤„éªŒè¯
- æ€§èƒ½: 3 å¤„ä¼˜åŒ–

---

## ğŸ”® æœªæ¥æ”¹è¿›å»ºè®®

1. **å…¨å±€ DataID æµè§ˆå™¨**
   - æ˜¾ç¤ºé“¾ä¸Šæ‰€æœ‰ DataID çš„å­˜åœ¨æ€§
   - æ”¯æŒæœç´¢å’Œè¿‡æ»¤
   - æ˜¾ç¤º DataID èŒƒå›´ï¼ˆå¦‚ #1 - #9999ï¼‰

2. **DataID è¯¦æƒ…å¼¹çª—**
   - ç‚¹å‡» DataID æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
   - åŒ…æ‹¬æ³¨å†Œæ—¶é—´ã€æ‰€æœ‰è€…ã€æ˜¯å¦ä¸Šæ¶ç­‰
   - æä¾›å¿«é€Ÿæ“ä½œæŒ‰é’®

3. **æ‰¹é‡ä¸Šæ¶åŠŸèƒ½**
   - æ”¯æŒå¤šé€‰ DataID
   - ç»Ÿä¸€è®¾ç½®ä»·æ ¼
   - æ‰¹é‡åˆ›å»º Listing

4. **DataID NFT åŒ–**
   - å°† DataID è½¬æ¢ä¸º NFT
   - æ”¯æŒ OpenSea ç­‰å¸‚åœºäº¤æ˜“
   - å¢åŠ æ”¶è—å’Œå±•ç¤ºåŠŸèƒ½

5. **DataID è½¬è®©åŠŸèƒ½**
   - å…è®¸ç”¨æˆ·è½¬è®© DataID æ‰€æœ‰æƒ
   - æ”¯æŒèµ é€æˆ–å‡ºå”®
   - è®°å½•è½¬è®©å†å²

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿï¼š
- GitHub Issues: [HealthChain/issues](https://github.com/your-repo/HealthChain/issues)
- Email: support@healthchain.io

---

**æ›´æ–°æ—¶é—´**: 2025-11-28  
**ç‰ˆæœ¬**: v2.1.0  
**ä½œè€…**: HealthChain Dev Team

